{"version":3,"sources":["config.js","reducers/mapClassReducer.js","reducers/formClassReducer.js","reducers/routeReducer.js","components/MainMenu.js","functions/formatter.js","components/Leg.js","reducers/trailReducer.js","components/RoutePreview.js","components/Routes.js","apis/autocomplete.js","components/AutocompleteSearchForm.js","reducers/backgroundMapReducer.js","apis/planRoute.js","apis/geocoding.js","components/SearchForm.js","components/BackgroundMap.js","App.js","store.js","index.js"],"names":["PORT","process","module","exports","WSPORT","setMapClass","value","type","mapClassReducer","state","arguments","length","undefined","action","setFormClass","formClassReducer","setRoutes","routeReducer","mapDispatchToProps","connect","_ref","react_default","a","createElement","Fragment","Menu","className","inverted","color","borderless","Item","name","active","onClick","Header","formatTime","time","date","Date","hour","getHours","minute","getMinutes","concat","Leg","leg","startTime","distance","result","floorDistance","Math","round","distanceRemainder","distanceKm","floor","formatDistance","from","mode","trip","route","shortName","tripHeadsign","to","trailReducer","RoutePreview","console","log","arrival","legs","endTime","departure","vehiclelegs","forEach","maxwidth","map","style","maxWidth","key","duration","stop","icon","Icon","size","setActiveTrail","routes","_useState","useState","_useState2","Object","slicedToArray","activeIndex","setActiveIndex","itineraryid","handleClick","e","titleProps","index","isActive","Accordion","fluid","styled","Title","components_RoutePreview","Content","components_Leg","autocomplete","asyncToGenerator","regenerator_default","mark","_callee","parameter","resultFilterer","searchUrl","autocompleteUrl","geobox","venues","streets","addresses","stops","wrap","_context","prev","next","search","formattedResults","data","features","res","title","properties","label","layer","axios","get","sent","abrupt","_","take","t0","_x","apply","this","AutocompleteForm","fieldName","inputValue","setInputValue","loading","setLoading","_useState3","_useState4","results","setResults","_useDebouncedCallback","useDebouncedCallback","_ref2","autocompleteResults","resetComponent","bounce","Search","onSearchChange","target","onResultSelect","_ref3","placeholder","resultRenderer","_ref4","iconName","setBackgroundLocation","backgroundReducer","planRoute","gql","_templateObject","geocode","coordinates","geometry","setClassState","classState","setFrom","setTo","_useState5","_useState6","_useState7","_useState8","planTime","setPlanTime","_useState9","_useState10","planDate","setPlanDate","_useState11","_useState12","arriveBy","setArriveBy","client","useApolloClient","useEffect","now","months","getMonth","years","getFullYear","days","getDate","getCurrentDate","submit","event","coordinatesFrom","coordinatesTo","plannedRoute","newRoutes","preventDefault","geocoding","query","variables","latFrom","lonFrom","latTo","lonTo","Segment","raised","marginBottom","Form","onSubmit","Field","AutocompleteSearchForm","Button","animated","visible","hidden","Dropdown","minWidth","paddingLeft","paddingRight","defaultValue","selection","options","text","onChange","Input","components_Routes","Loader","inline","marginTop","setLatlng","latlng","backgroundMapReducer","activeTrail","mapClass","trails","setTrails","alltrails","decodedTrail","polyUtil","decode","legGeometry","points","push","Map","center","zoom","maxZoom","attributionControl","zoomControl","doubleClickZoom","scrollWheelZoom","dragging","animate","easeLinearity","onclick","lat","lng","trail","Polyline","positions","TileLayer","url","attribution","App","components_MainMenu","components_BackgroundMap","components_SearchForm","reducer","combineReducers","store","createStore","applyMiddleware","thunk","wsLink","WebSocketLink","uri","config","reconnect","httpLink","createHttpLink","authLink","setContext","headers","token","localStorage","getItem","objectSpread","authorization","link","split","_getMainDefinition","getMainDefinition","kind","operation","ApolloClient","cache","InMemoryCache","ReactDOM","render","react_apollo_esm","ApolloContext","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.304c007c.chunk.js","sourcesContent":["if (process.env.NODE_ENV !== \"production\") {\n  require(\"dotenv\").config()\n}\n\nlet WSPORT = process.env.REACT_APP_WEBSOCKET_PORT\nlet PORT = process.env.REACT_APP_HTTP_PORT\n\nif (process.env.NODE_ENV === \"production\") {\n  PORT = process.env.PORT\n}\n\nmodule.exports = {\n  WSPORT,\n  PORT\n}\n","const mapClassReducer = (state = \"startMap\", action) => {\n  switch (action.type) {\n    case \"SET_MAP_CLASS\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setMapClass = value => {\n  return {\n    type: \"SET_MAP_CLASS\",\n    value\n  }\n}\nexport default mapClassReducer\n","const formClassReducer = (state = \"startForm\", action) => {\n  switch (action.type) {\n    case \"SET_FORM_CLASS\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setFormClass = value => {\n  return {\n    type: \"SET_FORM_CLASS\",\n    value\n  }\n}\nexport default formClassReducer\n","const routeReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"SET_ROUTES\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setRoutes = value => {\n  return {\n    type: \"SET_ROUTES\",\n    value\n  }\n}\nexport default routeReducer\n","import React from \"react\"\nimport { Menu, Header } from \"semantic-ui-react\"\nimport { setMapClass } from \"../reducers/mapClassReducer\"\nimport { setFormClass } from \"../reducers/formClassReducer\"\nimport { setRoutes } from \"../reducers/routeReducer\"\nimport { connect } from \"react-redux\"\n\nconst MainMenu = ({ setMapClass, setFormClass, setRoutes }) => {\n  return (\n    <>\n      <Menu className=\"menu\" inverted color=\"blue\" borderless>\n        <Menu.Item\n          name=\"BetterHsl\"\n          active={false}\n          onClick={() => {\n            setFormClass(\"startForm\")\n            setMapClass(\"startMap\")\n            setRoutes([])\n          }}\n        >\n          <Header>BetterHsl</Header>\n        </Menu.Item>\n      </Menu>\n    </>\n  )\n}\n\nconst mapDispatchToProps = {\n  setMapClass,\n  setFormClass,\n  setRoutes\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(MainMenu)\n","export const formatDistance = distance => {\n  const floorDistance = Math.round(distance)\n  let result\n  if (floorDistance > 1000) {\n    const distanceRemainder = Math.round((floorDistance % 1000) / 100)\n    const distanceKm = Math.floor(floorDistance / 1000)\n    result = `${distanceKm}.${distanceRemainder}km`\n  } else {\n    result = `${floorDistance}m`\n  }\n  return result\n}\n\nexport const formatDuration = duration => {\n  const durationInSeconds = duration\n  const durationHours = Math.floor(durationInSeconds / 3600)\n  const durationMinutes = Math.floor((durationInSeconds % 3600) / 60)\n  const conditionalHours = durationHours === 0 ? \"\" : `${durationHours} h`\n  return `${conditionalHours} ${durationMinutes} min`\n}\n\nexport const formatTime = time => {\n  const date = new Date(time)\n  const hour = date.getHours()\n  const minute = date.getMinutes()\n  if (minute < 10) {\n    return `${hour}:0${minute}`\n  }\n  return `${hour}:${minute}`\n}\n\nexport const getCurrentDate = () => {\n  const date = new Date()\n  const months =\n    date.getMonth() < 9 ? `0${date.getMonth() + 1}` : `${date.getMonth() + 1}`\n  const years = date.getFullYear()\n  const days = date.getDate() < 10 ? `0${date.getDate()}` : `${date.getDate()}`\n  return `${years}-${months}-${days}`\n}\n","import React from 'react'\nimport { formatDistance, formatTime } from '../functions/formatter'\n\nconst Leg = ({ leg }) => {\n  const startTime = formatTime(leg.startTime)\n  const distance = formatDistance(leg.distance)\n\n  return (\n    <div>\n      <p />\n      <div>\n        <b>{leg.from.name}</b>\n        <div>Mode: {leg.mode}</div>\n        {leg.trip && (\n          <div>\n            {leg.trip.route.shortName} {leg.trip.tripHeadsign}\n          </div>\n        )}\n        <div>Distance: {distance}</div>\n        <div>Departure: {startTime}</div>\n        <div>To: {leg.to.name}</div>\n      </div>\n    </div>\n  )\n}\nexport default Leg\n","const trailReducer = (state = 0, action) => {\n  switch (action.type) {\n    case \"SET_ACTIVE_TRAIL\":\n      return action.value\n    default:\n      return state\n  }\n}\n\nexport const setActiveTrail = value => {\n  return {\n    type: \"SET_ACTIVE_TRAIL\",\n    value\n  }\n}\n\nexport default trailReducer\n","import React from \"react\"\nimport {\n  formatDistance,\n  formatTime,\n  formatDuration\n} from \"../functions/formatter\"\nimport { Icon, Grid } from \"semantic-ui-react\"\n\nconst RoutePreview = ({ route }) => {\n  console.log(\"route:\", route)\n  const arrival = formatTime(route.legs[route.legs.length - 1].endTime)\n  const departure = formatTime(route.legs[0].startTime)\n  let vehiclelegs = 0\n  route.legs.forEach(leg => {\n    if (leg.mode !== \"WALK\") vehiclelegs++\n  })\n\n  const maxwidth = 41 / vehiclelegs + \"ch\"\n\n  return (\n    <>\n      <span className=\"routePreviewContainer\">\n        {route.legs.map(leg => {\n          if (leg.mode === \"WALK\") {\n            return <></>\n          }\n          return (\n            <span\n              className=\"routePreview\"\n              style={{ maxWidth: maxwidth }}\n              key={leg.duration}\n            >\n              {leg.from.stop.name}\n            </span>\n          )\n        })}\n      </span>\n      <div />\n      <span className=\"divided\">\n        <span className=\"previewDeparture\">{departure}</span>\n\n        {route.legs.map(leg => {\n          let color = \"red\"\n          let icon = \"train\"\n          if (leg.mode === \"WALK\") {\n            return <></>\n          } else if (leg.mode === \"SUBWAY\") {\n            color = \"orange\"\n            icon = \"subway\"\n          } else if (leg.mode === \"BUS\") {\n            color = \"blue\"\n            icon = \"bus\"\n          }\n          return (\n            <>\n              <span>\n                <Icon name={icon} />\n              </span>\n              <span style={{ color }} className=\"divider\" />\n            </>\n          )\n        })}\n        <span className=\"previewArrival\">{arrival}</span>\n        <Icon name=\"angle down\" className=\"expand_route\" size=\"big\" />\n      </span>\n      <div>\n        <span className=\"routePreviewContainer\">\n          {route.legs.map(leg => {\n            if (leg.mode === \"WALK\") {\n              return <></>\n            }\n            return (\n              <span className=\"routePreview\" style={{ maxWidth: maxwidth }}>\n                {leg.trip.route.shortName}\n              </span>\n            )\n          })}\n        </span>\n      </div>\n    </>\n  )\n}\nexport default RoutePreview\n","import React, { useState } from \"react\"\nimport Leg from \"./Leg\"\nimport { Accordion } from \"semantic-ui-react\"\nimport { setActiveTrail } from \"../reducers/trailReducer\"\nimport { connect } from \"react-redux\"\nimport RoutePreview from \"./RoutePreview\"\nimport { Timeline, Event } from \"react-timeline-scribble\"\n\nconst Routes = ({ setActiveTrail, routes }) => {\n  const [activeIndex, setActiveIndex] = useState(-1)\n  let itineraryid = -1\n\n  const handleClick = (e, titleProps) => {\n    const { index } = titleProps\n    const isActive = activeIndex === index ? -1 : index\n    if (isActive >= 0) {\n      setActiveTrail(isActive)\n    }\n    setActiveIndex(isActive)\n  }\n\n  if (routes.length === 0) return <></>\n\n  return (\n    <>\n      <Accordion fluid styled>\n        {routes.map(route => {\n          itineraryid++\n          return (\n            <>\n              <Accordion.Title\n                onClick={handleClick}\n                index={itineraryid}\n                active={activeIndex === itineraryid}\n              >\n                <span key={route.distance}>\n                  <RoutePreview route={route} />\n                </span>\n              </Accordion.Title>\n              <Accordion.Content active={activeIndex === itineraryid}>\n                <b>Route legs</b>\n                {route.legs.map(leg => (\n                  <div key={leg.distance}>\n                    <p />\n                    <Leg leg={leg} />\n                  </div>\n                ))}\n              </Accordion.Content>\n            </>\n          )\n        })}\n      </Accordion>\n      {/* <Timeline>\n        <Event interval={\"2016 – 2018\"} title={\"Lorem\"} subtitle={\"Ipsum\"}>\n          moi\n        </Event>\n        <Event interval={\"2015 – 2016\"} title={\"Lorem\"} subtitle={\"Ipsum\"}>\n          moi2\n        </Event>\n      </Timeline> */}\n    </>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    routes: state.routeReducer\n  }\n}\n\nconst mapDispatchToProps = {\n  setActiveTrail\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Routes)\n","import axios from \"axios\"\nimport _ from \"lodash\"\n\nconst autocomplete = async parameter => {\n  let result = []\n\n  const resultFilterer = search => {\n    const formattedResults = search.data.features.map(res => ({\n      title: res.properties.label,\n      layer: res.properties.layer\n    }))\n    result = result.concat(formattedResults)\n  }\n\n  if (parameter) {\n    try {\n      const searchUrl = \"https://api.digitransit.fi/geocoding/v1/search\"\n      const autocompleteUrl =\n        \"https://api.digitransit.fi/geocoding/v1/autocomplete\"\n\n      const geobox =\n        \"boundary.polygon=25.5345%2060.2592%2C25.3881%2060.1693%2C25.3559%2060.102%2C25.3293%2059.9371%2C24.2831%2059.78402%2C24.2721%2059.95501%2C24.2899%2060.00895%2C24.3087%2060.01947%2C24.1994%2060.12753%2C24.1362%2060.1114%2C24.1305%2060.12847%2C24.099%2060.1405%2C24.0179%2060.1512%2C24.0049%2060.1901%2C24.0445%2060.1918%2C24.0373%2060.2036%2C24.0796%2060.2298%2C24.1652%2060.2428%2C24.3095%2060.2965%2C24.3455%2060.2488%2C24.428%2060.3002%2C24.5015%2060.2872%2C24.4888%2060.3306%2C24.5625%2060.3142%2C24.5957%2060.3242%2C24.6264%2060.3597%2C24.666%2060.3638%2C24.7436%2060.3441%2C24.9291%2060.4523%2C24.974%2060.5253%2C24.9355%2060.5131%2C24.8971%2060.562%2C25.0388%2060.5806%2C25.1508%2060.5167%2C25.1312%2060.4938%2C25.0385%2060.512%2C25.057%2060.4897%2C25.0612%2060.4485%2C25.1221%2060.4474%2C25.1188%2060.4583%2C25.149%2060.4621%2C25.1693%2060.5062%2C25.2242%2060.5016%2C25.3661%2060.4118%2C25.3652%2060.3756%2C25.5345%2060.2592&size=4\"\n\n      const venues = await axios.get(\n        `${searchUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=venue&${geobox}`\n      )\n      resultFilterer(venues)\n\n      const streets = await axios.get(\n        `${searchUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=street&${geobox}`\n      )\n\n      resultFilterer(streets)\n\n      const addresses = await axios.get(\n        `${searchUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=address&${geobox}`\n      )\n\n      resultFilterer(addresses)\n\n      const stops = await axios.get(\n        `${autocompleteUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=stop&${geobox}`\n      )\n      console.log(\"stops:\", stops)\n\n      resultFilterer(stops)\n\n      return _.take(result, 16)\n    } catch (error) {\n      console.log(\"REST API ERROR: \", error)\n    }\n  }\n}\n\nexport default autocomplete\n","import React, { useState } from \"react\"\nimport _ from \"lodash\"\nimport { Search, Icon } from \"semantic-ui-react\"\nimport autocomplete from \"../apis/autocomplete\"\nimport useDebouncedCallback from \"use-debounce/lib/callback\"\n\nconst AutocompleteForm = ({ fieldName, inputValue, setInputValue }) => {\n  const [loading, setLoading] = useState(false)\n  const [results, setResults] = useState([])\n  const [bounce] = useDebouncedCallback(\n    async value => {\n      if (value.length < 1) return resetComponent()\n\n      const autocompleteResults = await autocomplete(value)\n      console.log(\"autocompleteResults:\", autocompleteResults)\n\n      setLoading(false)\n      setResults(autocompleteResults)\n    },\n    200,\n    []\n  )\n\n  const resetComponent = () => {\n    setLoading(false)\n    setResults([])\n    setInputValue(\"\")\n  }\n\n  const handleResultSelect = (e, { result }) => setInputValue(result.title)\n\n  const resultRenderer = ({ title, layer }) => {\n    /* Return an appropriate icon based on the layer of the autofill result */\n    let iconName\n    if (layer === \"venue\") {\n      iconName = \"building\"\n    } else if (layer === \"stop\") {\n      iconName = \"flag\"\n    } else if (layer === \"address\") {\n      iconName = \"point\"\n    } else {\n      iconName = \"map signs\"\n    }\n    return (\n      <div>\n        <Icon name={iconName} />\n        {title}\n      </div>\n    )\n  }\n  return (\n    <Search\n      fluid\n      loading={loading}\n      onSearchChange={e => {\n        setLoading(true)\n        setInputValue(e.target.value)\n        bounce(e.target.value)\n      }}\n      onResultSelect={handleResultSelect}\n      results={results}\n      value={inputValue}\n      placeholder={fieldName}\n      resultRenderer={resultRenderer}\n    />\n  )\n}\n\nexport default AutocompleteForm\n","const backgroundReducer = (state = [60.192059, 24.945831], action) => {\n  switch (action.type) {\n    case \"SET_BACKGROUND_MAP_LOCATION\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setBackgroundLocation = value => {\n  return {\n    type: \"SET_BACKGROUND_MAP_LOCATION\",\n    value\n  }\n}\n\nexport default backgroundReducer\n","import { gql } from \"apollo-boost\"\n\nconst planRoute = gql`\n  query planRoute(\n    $latFrom: Float\n    $lonFrom: Float\n    $latTo: Float\n    $lonTo: Float\n    $time: String\n    $date: String\n    $arriveBy: Boolean\n  ) {\n    planRoute(\n      latFrom: $latFrom\n      lonFrom: $lonFrom\n      latTo: $latTo\n      lonTo: $lonTo\n      time: $time\n      date: $date\n      arriveBy: $arriveBy\n    ) {\n      walkDistance\n      duration\n      legs {\n        legGeometry {\n          points\n        }\n        mode\n        startTime\n        endTime\n        trip {\n          route {\n            shortName\n            longName\n          }\n          tripHeadsign\n          stops {\n            name\n          }\n        }\n        from {\n          lat\n          lon\n          name\n          stop {\n            code\n            name\n          }\n        }\n        to {\n          lat\n          lon\n          name\n        }\n        distance\n      }\n    }\n  }\n`\nexport default planRoute\n","import axios from \"axios\"\n\nconst geocode = async value => {\n  const result = await axios.get(\n    `https://api.digitransit.fi/geocoding/v1/search?text=${value}&size=1`\n  )\n  const coordinates = result.data.features[0].geometry.coordinates\n  return coordinates\n}\n\nexport default geocode\n","import React, { useState, useEffect } from \"react\"\nimport { useApolloClient } from \"react-apollo-hooks\"\nimport Routes from \"./Routes\"\nimport AutocompleteSearchForm from \"./AutocompleteSearchForm\"\nimport {\n  Segment,\n  Form,\n  Button,\n  Icon,\n  Loader,\n  Dropdown,\n  Input\n} from \"semantic-ui-react\"\nimport { connect } from \"react-redux\"\nimport { setRoutes } from \"../reducers/routeReducer\"\nimport { setBackgroundLocation } from \"../reducers/backgroundMapReducer\"\nimport { setMapClass } from \"../reducers/mapClassReducer\"\nimport { setFormClass } from \"../reducers/formClassReducer\"\nimport { formatTime, getCurrentDate } from \"../functions/formatter\"\nimport planRoute from \"../apis/planRoute\"\nimport geocoding from \"../apis/geocoding\"\n\nconst SearchForm = ({\n  setRoutes,\n  setBackgroundLocation,\n  setMapClass,\n  classState,\n  setClassState\n}) => {\n  const [from, setFrom] = useState(\"\")\n  const [to, setTo] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [planTime, setPlanTime] = useState(\"\")\n  const [planDate, setPlanDate] = useState(\"\")\n  const [arriveBy, setArriveBy] = useState(false)\n\n  const client = useApolloClient()\n  useEffect(() => {\n    setPlanTime(formatTime(Date.now()))\n    setPlanDate(getCurrentDate())\n  }, [])\n\n  const submit = async event => {\n    event.preventDefault()\n    setRoutes([])\n    if (from !== \"\" && to !== \"\") {\n      setLoading(true)\n      setClassState(\"resultsForm\")\n\n      const coordinatesFrom = await geocoding(from)\n      const coordinatesTo = await geocoding(to)\n\n      setBackgroundLocation([coordinatesFrom[1], coordinatesFrom[0]])\n      setMapClass(\"resultsMap\")\n\n      const plannedRoute = await client.query({\n        query: planRoute,\n        variables: {\n          latFrom: coordinatesFrom[1],\n          lonFrom: coordinatesFrom[0],\n          latTo: coordinatesTo[1],\n          lonTo: coordinatesTo[0],\n          time: `${planTime}:00`,\n          date: planDate,\n          arriveBy\n        }\n      })\n      const newRoutes = plannedRoute.data.planRoute\n      setLoading(false)\n      setRoutes(newRoutes)\n    }\n  }\n\n  return (\n    <div className={classState}>\n      <Segment raised style={{ marginBottom: 0 }}>\n        <Form onSubmit={submit}>\n          <Form.Field>\n            <AutocompleteSearchForm\n              inputValue={from}\n              setInputValue={setFrom}\n              fieldName=\"from\"\n            />\n          </Form.Field>\n          <Form.Field>\n            <AutocompleteSearchForm\n              inputValue={to}\n              setInputValue={setTo}\n              fieldName=\"to\"\n            />\n          </Form.Field>\n\n          <Form.Field>\n            <div className=\"toggleSearchTime\">\n              <Button animated type=\"submit\">\n                <Button.Content visible>Search</Button.Content>\n                <Button.Content hidden>\n                  <Icon name=\"arrow right\" />\n                </Button.Content>\n              </Button>\n              <span>\n                <Dropdown\n                  style={{\n                    minWidth: \"11ch\",\n                    paddingLeft: \"10px\",\n                    paddingRight: \"10px\"\n                  }}\n                  defaultValue={false}\n                  selection\n                  fluid\n                  options={[\n                    { key: 1, value: false, text: \"leave at\" },\n                    { key: 2, value: true, text: \"arrive by\" }\n                  ]}\n                  onChange={(event, { value }) => {\n                    setArriveBy(value)\n                  }}\n                />\n              </span>\n              <span>\n                <Input\n                  className=\"timeInput\"\n                  defaultValue={planTime}\n                  type=\"time\"\n                  onChange={event => setPlanTime(event.target.value)}\n                />\n              </span>\n              <span>\n                <Input\n                  type=\"date\"\n                  style={{ maxWidth: \"163px\" }}\n                  value={planDate}\n                  onChange={event => setPlanDate(event.target.value)}\n                />\n              </span>\n            </div>\n          </Form.Field>\n        </Form>\n      </Segment>\n      <Routes />\n      <Loader\n        inline=\"centered\"\n        active={loading}\n        style={{ marginTop: \"10px\" }}\n      />\n    </div>\n  )\n}\nconst mapStateToProps = state => ({\n  routes: state.routeReducer,\n  classState: state.formClassReducer\n})\nconst mapDispatchToProps = {\n  setRoutes,\n  setBackgroundLocation,\n  setMapClass,\n  setClassState: setFormClass\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SearchForm)\n","import React, { useState, useEffect } from \"react\"\nimport \"leaflet/dist/leaflet.css\"\nimport { Map, Marker, Popup, TileLayer, Polyline } from \"react-leaflet\"\nimport { connect } from \"react-redux\"\nimport { setBackgroundLocation } from \"../reducers/backgroundMapReducer\"\nimport { setActiveTrail } from \"../reducers/trailReducer\"\nimport polyUtil from \"polyline-encoded\"\n\nconst BackgroundMap = ({\n  latlng,\n  setLatlng,\n  routes,\n  activeTrail,\n  mapClass\n}) => {\n  const [trails, setTrails] = useState([])\n  console.log(\"mapclass bgmapin alussa: \", mapClass)\n\n  useEffect(() => {\n    let alltrails = []\n    //tähän vielä joku filteröivä ehto, active trail rendataan nyt kahdesti\n    if (routes.length > 0) {\n      alltrails = routes.map(route =>\n        route.legs.map(leg => {\n          const decodedTrail = polyUtil.decode(leg.legGeometry.points)\n          return { color: \"gray\", decodedTrail }\n        })\n      )\n      console.log(\"activeTrail:\", activeTrail)\n      console.log(\"routes:\", routes)\n\n      const placeholder = routes[activeTrail].legs.map(leg => {\n        let color = \"red\"\n        if (leg.mode === \"WALK\") {\n          color = \"green\"\n        } else if (leg.mode === \"SUBWAY\") {\n          color = \"orange\"\n        } else if (leg.mode === \"BUS\") {\n          color = \"blue\"\n        }\n        const decodedTrail = polyUtil.decode(leg.legGeometry.points)\n        return { color, decodedTrail, active: true }\n      })\n      alltrails.push(placeholder)\n    }\n    console.log(\"alltrails:\", alltrails)\n    setTrails(alltrails)\n  }, [routes, activeTrail, mapClass])\n  return (\n    <>\n      {console.log(\"latlng juuri ennen mappia: \", latlng)}\n      {console.log(\"className ennen mappia: \", mapClass)}\n      <Map\n        className={mapClass}\n        center={latlng}\n        zoom={12}\n        maxZoom={19}\n        attributionControl={true}\n        zoomControl={true}\n        doubleClickZoom={true}\n        scrollWheelZoom={true}\n        dragging={true}\n        animate={true}\n        easeLinearity={0.35}\n        onclick={e => {\n          console.log(\"lat, lng\", [e.latlng.lat, e.latlng.lng])\n        }}\n      >\n        {console.log(\"routes bgmapissa: \", routes)}\n        {console.log(\"trails ennen rendausta: \", trails)}\n        {trails.map(trail =>\n          trail.map(leg => (\n            <Polyline color={leg.color} positions={leg.decodedTrail} />\n          ))\n        )}\n        {console.log(\"trails rendauksen jälkeen: \", trails)}\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        />\n      </Map>\n    </>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    latlng: state.backgroundMapReducer,\n    routes: state.routeReducer,\n    activeTrail: state.trailReducer,\n    mapClass: state.mapClassReducer\n  }\n}\n\nconst mapDispatchToProps = {\n  setLatlng: setBackgroundLocation\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BackgroundMap)\n","import React from \"react\"\nimport MainMenu from \"./components/MainMenu\"\nimport SearchForm from \"./components/SearchForm\"\nimport BackgroundMap from \"./components/BackgroundMap\"\nimport \"./styles.css\"\n\nconst App = () => {\n  return (\n    <>\n      <MainMenu />\n      <BackgroundMap />\n      <SearchForm />\n    </>\n  )\n}\n\nexport default App\n","import { createStore, combineReducers, applyMiddleware } from \"redux\"\nimport thunk from \"redux-thunk\"\nimport backgroundMapReducer from \"./reducers/backgroundMapReducer\"\nimport routeReducer from \"./reducers/routeReducer\"\nimport trailReducer from \"./reducers/trailReducer\"\nimport mapClassReducer from \"./reducers/mapClassReducer\"\nimport formClassReducer from \"./reducers/formClassReducer\"\nconst reducer = combineReducers({\n  backgroundMapReducer,\n  routeReducer,\n  trailReducer,\n  mapClassReducer,\n  formClassReducer\n})\n\nconst store = createStore(reducer, applyMiddleware(thunk))\n\nexport default store\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport { ApolloProvider } from \"react-apollo\"\nimport { ApolloProvider as ApolloHooksProvider } from \"react-apollo-hooks\"\nimport { Provider } from \"react-redux\"\nimport store from \"./store\"\n\nimport { ApolloClient } from \"apollo-boost\"\nimport { createHttpLink } from \"apollo-link-http\"\nimport { InMemoryCache } from \"apollo-cache-inmemory\"\nimport { setContext } from \"apollo-link-context\"\n\nimport { split } from \"apollo-link\"\nimport { WebSocketLink } from \"apollo-link-ws\"\nimport { getMainDefinition } from \"apollo-utilities\"\n\nimport config from \"./config\"\n// Create a WebSocket link:\nconst wsLink = new WebSocketLink({\n  uri: config.WSPORT,\n  options: {\n    reconnect: true\n  }\n})\n\nconst httpLink = createHttpLink({\n  uri: config.PORT\n})\n\nconst authLink = setContext((_, { headers }) => {\n  const token = localStorage.getItem(\"app-user-token\")\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `bearer ${token}` : null\n    }\n  }\n})\n\nconst link = split(\n  ({ query }) => {\n    const { kind, operation } = getMainDefinition(query)\n    return kind === \"OperationDefinition\" && operation === \"subscription\"\n  },\n  wsLink,\n  authLink.concat(httpLink)\n)\n\nconst client = new ApolloClient({\n  link,\n  cache: new InMemoryCache()\n})\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <ApolloHooksProvider client={client}>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </ApolloHooksProvider>\n  </ApolloProvider>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}