{"version":3,"sources":["config.js","reducers/mapClassReducer.js","reducers/formClassReducer.js","reducers/routeReducer.js","components/MainMenu.js","functions/formatter.js","components/Leg.js","reducers/trailReducer.js","components/RoutePreview.js","components/Routes.js","apis/autocomplete.js","components/AutocompleteSearchForm.js","reducers/backgroundMapReducer.js","apis/planRoute.js","apis/geocoding.js","components/SearchForm.js","components/BackgroundMap.js","App.js","store.js","index.js"],"names":["module","exports","WSPORT","process","PORT","setMapClass","value","type","mapClassReducer","state","arguments","length","undefined","action","setFormClass","formClassReducer","setRoutes","routeReducer","mapDispatchToProps","connect","_ref","react_default","a","createElement","Fragment","Menu","className","inverted","color","borderless","Item","name","active","onClick","Header","formatTime","time","date","Date","hour","getHours","minute","getMinutes","concat","Leg","leg","startTime","distance","result","floorDistance","Math","round","distanceRemainder","distanceKm","floor","formatDistance","from","mode","trip","route","shortName","tripHeadsign","to","trailReducer","RoutePreview","console","log","arrival","legs","endTime","departure","vehiclelegs","forEach","maxwidth","map","style","maxWidth","key","duration","stop","icon","Icon","size","setActiveTrail","routes","_useState","useState","_useState2","Object","slicedToArray","activeIndex","setActiveIndex","itineraryid","handleClick","e","titleProps","index","isActive","Accordion","fluid","styled","Title","components_RoutePreview","Content","components_Leg","autocomplete","asyncToGenerator","regenerator_default","mark","_callee","parameter","resultFilterer","searchUrl","autocompleteUrl","geobox","venues","streets","addresses","stops","wrap","_context","prev","next","search","formattedResults","data","features","res","title","properties","label","layer","axios","get","sent","abrupt","_","take","_x","apply","this","AutocompleteForm","fieldName","inputValue","setInputValue","loading","setLoading","_useState3","_useState4","results","setResults","_useDebouncedCallback","useDebouncedCallback","_ref2","autocompleteResults","resetComponent","bounce","Search","onSearchChange","target","onResultSelect","_ref3","placeholder","resultRenderer","_ref4","iconName","setBackgroundLocation","backgroundReducer","planRoute","gql","_templateObject","geocode","coordinates","geometry","setClassState","classState","setFrom","setTo","_useState5","_useState6","_useState7","_useState8","planTime","setPlanTime","_useState9","_useState10","planDate","setPlanDate","_useState11","_useState12","arriveBy","setArriveBy","client","useApolloClient","useEffect","now","months","getMonth","years","getFullYear","days","getDate","getCurrentDate","submit","event","coordinatesFrom","coordinatesTo","plannedRoute","newRoutes","preventDefault","geocoding","query","variables","latFrom","lonFrom","latTo","lonTo","Segment","raised","marginBottom","Form","onSubmit","Field","AutocompleteSearchForm","Button","animated","visible","hidden","Dropdown","minWidth","paddingLeft","paddingRight","defaultValue","selection","options","text","onChange","Input","components_Routes","Loader","inline","marginTop","setLatlng","latlng","backgroundMapReducer","activeTrail","mapClass","trails","setTrails","alltrails","decodedTrail","polyUtil","decode","legGeometry","points","push","Map","center","zoom","maxZoom","attributionControl","zoomControl","doubleClickZoom","scrollWheelZoom","dragging","animate","easeLinearity","onclick","lat","lng","trail","Polyline","positions","TileLayer","url","attribution","App","components_MainMenu","components_BackgroundMap","components_SearchForm","reducer","combineReducers","store","createStore","applyMiddleware","thunk","wsLink","WebSocketLink","uri","config","reconnect","httpLink","createHttpLink","authLink","setContext","headers","token","localStorage","getItem","objectSpread","authorization","link","split","_getMainDefinition","getMainDefinition","kind","operation","ApolloClient","cache","InMemoryCache","ReactDOM","render","react_apollo_esm","ApolloContext","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0ef7efbc.chunk.js","sourcesContent":["if (process.env.NODE_ENV !== \"production\") {\n  require(\"dotenv\").config()\n}\n\nlet WSPORT = process.env.REACT_APP_WEBSOCKET_PORT\nlet PORT = process.env.REACT_APP_HTTP_PORT\n\nmodule.exports = {\n  WSPORT,\n  PORT\n}\n","const mapClassReducer = (state = \"startMap\", action) => {\n  switch (action.type) {\n    case \"SET_MAP_CLASS\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setMapClass = value => {\n  return {\n    type: \"SET_MAP_CLASS\",\n    value\n  }\n}\nexport default mapClassReducer\n","const formClassReducer = (state = \"startForm\", action) => {\n  switch (action.type) {\n    case \"SET_FORM_CLASS\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setFormClass = value => {\n  return {\n    type: \"SET_FORM_CLASS\",\n    value\n  }\n}\nexport default formClassReducer\n","const routeReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"SET_ROUTES\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setRoutes = value => {\n  return {\n    type: \"SET_ROUTES\",\n    value\n  }\n}\nexport default routeReducer\n","import React from \"react\"\nimport { Menu, Header } from \"semantic-ui-react\"\nimport { setMapClass } from \"../reducers/mapClassReducer\"\nimport { setFormClass } from \"../reducers/formClassReducer\"\nimport { setRoutes } from \"../reducers/routeReducer\"\nimport { connect } from \"react-redux\"\n\nconst MainMenu = ({ setMapClass, setFormClass, setRoutes }) => {\n  return (\n    <>\n      <Menu className=\"menu\" inverted color=\"blue\" borderless>\n        <Menu.Item\n          name=\"BetterHsl\"\n          active={false}\n          onClick={() => {\n            setFormClass(\"startForm\")\n            setMapClass(\"startMap\")\n            setRoutes([])\n          }}\n        >\n          <Header>BetterHsl</Header>\n        </Menu.Item>\n      </Menu>\n    </>\n  )\n}\n\nconst mapDispatchToProps = {\n  setMapClass,\n  setFormClass,\n  setRoutes\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(MainMenu)\n","export const formatDistance = distance => {\n  const floorDistance = Math.round(distance)\n  let result\n  if (floorDistance > 1000) {\n    const distanceRemainder = Math.round((floorDistance % 1000) / 100)\n    const distanceKm = Math.floor(floorDistance / 1000)\n    result = `${distanceKm}.${distanceRemainder}km`\n  } else {\n    result = `${floorDistance}m`\n  }\n  return result\n}\n\nexport const formatDuration = duration => {\n  const durationInSeconds = duration\n  const durationHours = Math.floor(durationInSeconds / 3600)\n  const durationMinutes = Math.floor((durationInSeconds % 3600) / 60)\n  const conditionalHours = durationHours === 0 ? \"\" : `${durationHours} h`\n  return `${conditionalHours} ${durationMinutes} min`\n}\n\nexport const formatTime = time => {\n  const date = new Date(time)\n  const hour = date.getHours()\n  const minute = date.getMinutes()\n  if (minute < 10) {\n    return `${hour}:0${minute}`\n  }\n  return `${hour}:${minute}`\n}\n\nexport const getCurrentDate = () => {\n  const date = new Date()\n  const months =\n    date.getMonth() < 9 ? `0${date.getMonth() + 1}` : `${date.getMonth() + 1}`\n  const years = date.getFullYear()\n  const days = date.getDate() < 10 ? `0${date.getDate()}` : `${date.getDate()}`\n  return `${years}-${months}-${days}`\n}\n","import React from 'react'\nimport { formatDistance, formatTime } from '../functions/formatter'\n\nconst Leg = ({ leg }) => {\n  const startTime = formatTime(leg.startTime)\n  const distance = formatDistance(leg.distance)\n\n  return (\n    <div>\n      <p />\n      <div>\n        <b>{leg.from.name}</b>\n        <div>Mode: {leg.mode}</div>\n        {leg.trip && (\n          <div>\n            {leg.trip.route.shortName} {leg.trip.tripHeadsign}\n          </div>\n        )}\n        <div>Distance: {distance}</div>\n        <div>Departure: {startTime}</div>\n        <div>To: {leg.to.name}</div>\n      </div>\n    </div>\n  )\n}\nexport default Leg\n","const trailReducer = (state = 0, action) => {\n  switch (action.type) {\n    case \"SET_ACTIVE_TRAIL\":\n      return action.value\n    default:\n      return state\n  }\n}\n\nexport const setActiveTrail = value => {\n  return {\n    type: \"SET_ACTIVE_TRAIL\",\n    value\n  }\n}\n\nexport default trailReducer\n","import React from \"react\"\nimport {\n  formatDistance,\n  formatTime,\n  formatDuration\n} from \"../functions/formatter\"\nimport { Icon, Grid } from \"semantic-ui-react\"\n\nconst RoutePreview = ({ route }) => {\n  console.log(\"route:\", route)\n  const arrival = formatTime(route.legs[route.legs.length - 1].endTime)\n  const departure = formatTime(route.legs[0].startTime)\n  let vehiclelegs = 0\n  route.legs.forEach(leg => {\n    if (leg.mode !== \"WALK\") vehiclelegs++\n  })\n\n  const maxwidth = 41 / vehiclelegs + \"ch\"\n\n  return (\n    <>\n      <span className=\"routePreviewContainer\">\n        {route.legs.map(leg => {\n          if (leg.mode === \"WALK\") {\n            return <></>\n          }\n          return (\n            <span\n              className=\"routePreview\"\n              style={{ maxWidth: maxwidth }}\n              key={leg.duration}\n            >\n              {leg.from.stop.name}\n            </span>\n          )\n        })}\n      </span>\n      <div />\n      <span className=\"divided\">\n        <span className=\"previewDeparture\">{departure}</span>\n\n        {route.legs.map(leg => {\n          let color = \"red\"\n          let icon = \"train\"\n          if (leg.mode === \"WALK\") {\n            return <></>\n          } else if (leg.mode === \"SUBWAY\") {\n            color = \"orange\"\n            icon = \"subway\"\n          } else if (leg.mode === \"BUS\") {\n            color = \"blue\"\n            icon = \"bus\"\n          }\n          return (\n            <>\n              <span>\n                <Icon name={icon} />\n              </span>\n              <span style={{ color }} className=\"divider\" />\n            </>\n          )\n        })}\n        <span className=\"previewArrival\">{arrival}</span>\n        <Icon name=\"angle down\" className=\"expand_route\" size=\"big\" />\n      </span>\n      <div>\n        <span className=\"routePreviewContainer\">\n          {route.legs.map(leg => {\n            if (leg.mode === \"WALK\") {\n              return <></>\n            }\n            return (\n              <span className=\"routePreview\" style={{ maxWidth: maxwidth }}>\n                {leg.trip.route.shortName}\n              </span>\n            )\n          })}\n        </span>\n      </div>\n    </>\n  )\n}\nexport default RoutePreview\n","import React, { useState } from \"react\"\nimport Leg from \"./Leg\"\nimport { Accordion } from \"semantic-ui-react\"\nimport { setActiveTrail } from \"../reducers/trailReducer\"\nimport { connect } from \"react-redux\"\nimport RoutePreview from \"./RoutePreview\"\nimport { Timeline, Event } from \"react-timeline-scribble\"\n\nconst Routes = ({ setActiveTrail, routes }) => {\n  const [activeIndex, setActiveIndex] = useState(-1)\n  let itineraryid = -1\n\n  const handleClick = (e, titleProps) => {\n    const { index } = titleProps\n    const isActive = activeIndex === index ? -1 : index\n    if (isActive >= 0) {\n      setActiveTrail(isActive)\n    }\n    setActiveIndex(isActive)\n  }\n\n  if (routes.length === 0) return <></>\n\n  return (\n    <>\n      <Accordion fluid styled>\n        {routes.map(route => {\n          itineraryid++\n          return (\n            <>\n              <Accordion.Title\n                onClick={handleClick}\n                index={itineraryid}\n                active={activeIndex === itineraryid}\n              >\n                <span key={route.distance}>\n                  <RoutePreview route={route} />\n                </span>\n              </Accordion.Title>\n              <Accordion.Content active={activeIndex === itineraryid}>\n                <b>Route legs</b>\n                {route.legs.map(leg => (\n                  <div key={leg.distance}>\n                    <p />\n                    <Leg leg={leg} />\n                  </div>\n                ))}\n              </Accordion.Content>\n            </>\n          )\n        })}\n      </Accordion>\n      {/* <Timeline>\n        <Event interval={\"2016 – 2018\"} title={\"Lorem\"} subtitle={\"Ipsum\"}>\n          moi\n        </Event>\n        <Event interval={\"2015 – 2016\"} title={\"Lorem\"} subtitle={\"Ipsum\"}>\n          moi2\n        </Event>\n      </Timeline> */}\n    </>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    routes: state.routeReducer\n  }\n}\n\nconst mapDispatchToProps = {\n  setActiveTrail\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Routes)\n","import axios from 'axios'\nimport _ from 'lodash'\n\nconst autocomplete = async parameter => {\n  let result = []\n\n  const resultFilterer = search => {\n    const formattedResults = search.data.features.map(res => ({\n      title: res.properties.label,\n      layer: res.properties.layer\n    }))\n    result = result.concat(formattedResults)\n  }\n\n  if (parameter) {\n    const searchUrl = 'http://api.digitransit.fi/geocoding/v1/search'\n    const autocompleteUrl =\n      'http://api.digitransit.fi/geocoding/v1/autocomplete'\n\n    const geobox =\n      'boundary.polygon=25.5345%2060.2592%2C25.3881%2060.1693%2C25.3559%2060.102%2C25.3293%2059.9371%2C24.2831%2059.78402%2C24.2721%2059.95501%2C24.2899%2060.00895%2C24.3087%2060.01947%2C24.1994%2060.12753%2C24.1362%2060.1114%2C24.1305%2060.12847%2C24.099%2060.1405%2C24.0179%2060.1512%2C24.0049%2060.1901%2C24.0445%2060.1918%2C24.0373%2060.2036%2C24.0796%2060.2298%2C24.1652%2060.2428%2C24.3095%2060.2965%2C24.3455%2060.2488%2C24.428%2060.3002%2C24.5015%2060.2872%2C24.4888%2060.3306%2C24.5625%2060.3142%2C24.5957%2060.3242%2C24.6264%2060.3597%2C24.666%2060.3638%2C24.7436%2060.3441%2C24.9291%2060.4523%2C24.974%2060.5253%2C24.9355%2060.5131%2C24.8971%2060.562%2C25.0388%2060.5806%2C25.1508%2060.5167%2C25.1312%2060.4938%2C25.0385%2060.512%2C25.057%2060.4897%2C25.0612%2060.4485%2C25.1221%2060.4474%2C25.1188%2060.4583%2C25.149%2060.4621%2C25.1693%2060.5062%2C25.2242%2060.5016%2C25.3661%2060.4118%2C25.3652%2060.3756%2C25.5345%2060.2592&size=4'\n\n    const venues = await axios.get(\n      `${searchUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=venue&${geobox}`\n    )\n    resultFilterer(venues)\n\n    const streets = await axios.get(\n      `${searchUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=street&${geobox}`\n    )\n\n    resultFilterer(streets)\n\n    const addresses = await axios.get(\n      `${searchUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=address&${geobox}`\n    )\n\n    resultFilterer(addresses)\n\n    const stops = await axios.get(\n      `${autocompleteUrl}?text=${parameter}&focus.point.lat=60.168656&focus.point.lon=24.940899&layers=stop&${geobox}`\n    )\n    console.log('stops:', stops)\n\n    resultFilterer(stops)\n\n    return _.take(result, 16)\n  }\n}\n\nexport default autocomplete\n","import React, { useState } from \"react\"\nimport _ from \"lodash\"\nimport { Search, Icon } from \"semantic-ui-react\"\nimport autocomplete from \"../apis/autocomplete\"\nimport useDebouncedCallback from \"use-debounce/lib/callback\"\n\nconst AutocompleteForm = ({ fieldName, inputValue, setInputValue }) => {\n  const [loading, setLoading] = useState(false)\n  const [results, setResults] = useState([])\n  const [bounce] = useDebouncedCallback(\n    async value => {\n      if (value.length < 1) return resetComponent()\n\n      const autocompleteResults = await autocomplete(value)\n      console.log(\"autocompleteResults:\", autocompleteResults)\n\n      setLoading(false)\n      setResults(autocompleteResults)\n    },\n    200,\n    []\n  )\n\n  const resetComponent = () => {\n    setLoading(false)\n    setResults([])\n    setInputValue(\"\")\n  }\n\n  const handleResultSelect = (e, { result }) => setInputValue(result.title)\n\n  const resultRenderer = ({ title, layer }) => {\n    /* Return an appropriate icon based on the layer of the autofill result */\n    let iconName\n    if (layer === \"venue\") {\n      iconName = \"building\"\n    } else if (layer === \"stop\") {\n      iconName = \"flag\"\n    } else if (layer === \"address\") {\n      iconName = \"point\"\n    } else {\n      iconName = \"map signs\"\n    }\n    return (\n      <div>\n        <Icon name={iconName} />\n        {title}\n      </div>\n    )\n  }\n  return (\n    <Search\n      fluid\n      loading={loading}\n      onSearchChange={e => {\n        setLoading(true)\n        setInputValue(e.target.value)\n        bounce(e.target.value)\n      }}\n      onResultSelect={handleResultSelect}\n      results={results}\n      value={inputValue}\n      placeholder={fieldName}\n      resultRenderer={resultRenderer}\n    />\n  )\n}\n\nexport default AutocompleteForm\n","const backgroundReducer = (state = [60.192059, 24.945831], action) => {\n  switch (action.type) {\n    case \"SET_BACKGROUND_MAP_LOCATION\":\n      return action.value\n    default:\n      return state\n  }\n}\nexport const setBackgroundLocation = value => {\n  return {\n    type: \"SET_BACKGROUND_MAP_LOCATION\",\n    value\n  }\n}\n\nexport default backgroundReducer\n","import { gql } from \"apollo-boost\"\n\nconst planRoute = gql`\n  query planRoute(\n    $latFrom: Float\n    $lonFrom: Float\n    $latTo: Float\n    $lonTo: Float\n    $time: String\n    $date: String\n    $arriveBy: Boolean\n  ) {\n    planRoute(\n      latFrom: $latFrom\n      lonFrom: $lonFrom\n      latTo: $latTo\n      lonTo: $lonTo\n      time: $time\n      date: $date\n      arriveBy: $arriveBy\n    ) {\n      walkDistance\n      duration\n      legs {\n        legGeometry {\n          points\n        }\n        mode\n        startTime\n        endTime\n        trip {\n          route {\n            shortName\n            longName\n          }\n          tripHeadsign\n          stops {\n            name\n          }\n        }\n        from {\n          lat\n          lon\n          name\n          stop {\n            code\n            name\n          }\n        }\n        to {\n          lat\n          lon\n          name\n        }\n        distance\n      }\n    }\n  }\n`\nexport default planRoute\n","import axios from \"axios\"\n\nconst geocode = async value => {\n  const result = await axios.get(\n    `https://api.digitransit.fi/geocoding/v1/search?text=${value}&size=1`\n  )\n  const coordinates = result.data.features[0].geometry.coordinates\n  return coordinates\n}\n\nexport default geocode\n","import React, { useState, useEffect } from \"react\"\nimport { useApolloClient } from \"react-apollo-hooks\"\nimport Routes from \"./Routes\"\nimport AutocompleteSearchForm from \"./AutocompleteSearchForm\"\nimport {\n  Segment,\n  Form,\n  Button,\n  Icon,\n  Loader,\n  Dropdown,\n  Input\n} from \"semantic-ui-react\"\nimport { connect } from \"react-redux\"\nimport { setRoutes } from \"../reducers/routeReducer\"\nimport { setBackgroundLocation } from \"../reducers/backgroundMapReducer\"\nimport { setMapClass } from \"../reducers/mapClassReducer\"\nimport { setFormClass } from \"../reducers/formClassReducer\"\nimport { formatTime, getCurrentDate } from \"../functions/formatter\"\nimport planRoute from \"../apis/planRoute\"\nimport geocoding from \"../apis/geocoding\"\n\nconst SearchForm = ({\n  setRoutes,\n  setBackgroundLocation,\n  setMapClass,\n  classState,\n  setClassState\n}) => {\n  const [from, setFrom] = useState(\"\")\n  const [to, setTo] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [planTime, setPlanTime] = useState(\"\")\n  const [planDate, setPlanDate] = useState(\"\")\n  const [arriveBy, setArriveBy] = useState(false)\n\n  const client = useApolloClient()\n  useEffect(() => {\n    setPlanTime(formatTime(Date.now()))\n    setPlanDate(getCurrentDate())\n  }, [])\n  const submit = async event => {\n    event.preventDefault()\n    setRoutes([])\n    if (from !== \"\" && to !== \"\") {\n      setLoading(true)\n      setClassState(\"resultsForm\")\n\n      const coordinatesFrom = await geocoding(from)\n      const coordinatesTo = await geocoding(to)\n\n      setBackgroundLocation([coordinatesFrom[1], coordinatesFrom[0]])\n      setMapClass(\"resultsMap\")\n\n      const plannedRoute = await client.query({\n        query: planRoute,\n        variables: {\n          latFrom: coordinatesFrom[1],\n          lonFrom: coordinatesFrom[0],\n          latTo: coordinatesTo[1],\n          lonTo: coordinatesTo[0],\n          time: `${planTime}:00`,\n          date: planDate,\n          arriveBy\n        }\n      })\n      const newRoutes = plannedRoute.data.planRoute\n      setLoading(false)\n      setRoutes(newRoutes)\n    }\n  }\n\n  return (\n    <div className={classState}>\n      <Segment raised style={{ marginBottom: 0 }}>\n        <Form onSubmit={submit}>\n          <Form.Field>\n            <AutocompleteSearchForm\n              inputValue={from}\n              setInputValue={setFrom}\n              fieldName=\"from\"\n            />\n          </Form.Field>\n          <Form.Field>\n            <AutocompleteSearchForm\n              inputValue={to}\n              setInputValue={setTo}\n              fieldName=\"to\"\n            />\n          </Form.Field>\n\n          <Form.Field>\n            <div className=\"toggleSearchTime\">\n              <Button animated type=\"submit\">\n                <Button.Content visible>Search</Button.Content>\n                <Button.Content hidden>\n                  <Icon name=\"arrow right\" />\n                </Button.Content>\n              </Button>\n              <span>\n                <Dropdown\n                  style={{\n                    minWidth: \"11ch\",\n                    paddingLeft: \"10px\",\n                    paddingRight: \"10px\"\n                  }}\n                  defaultValue={false}\n                  selection\n                  fluid\n                  options={[\n                    { key: 1, value: false, text: \"leave at\" },\n                    { key: 2, value: true, text: \"arrive by\" }\n                  ]}\n                  onChange={(event, { value }) => {\n                    setArriveBy(value)\n                  }}\n                />\n              </span>\n              <span>\n                <Input\n                  className=\"timeInput\"\n                  defaultValue={planTime}\n                  type=\"time\"\n                  onChange={event => setPlanTime(event.target.value)}\n                />\n              </span>\n              <span>\n                <Input\n                  type=\"date\"\n                  style={{ maxWidth: \"163px\" }}\n                  value={planDate}\n                  onChange={event => setPlanDate(event.target.value)}\n                />\n              </span>\n            </div>\n          </Form.Field>\n        </Form>\n      </Segment>\n      <Routes />\n      <Loader\n        inline=\"centered\"\n        active={loading}\n        style={{ marginTop: \"10px\" }}\n      />\n    </div>\n  )\n}\nconst mapStateToProps = state => ({\n  routes: state.routeReducer,\n  classState: state.formClassReducer\n})\nconst mapDispatchToProps = {\n  setRoutes,\n  setBackgroundLocation,\n  setMapClass,\n  setClassState: setFormClass\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SearchForm)\n","import React, { useState, useEffect } from \"react\"\nimport \"leaflet/dist/leaflet.css\"\nimport { Map, Marker, Popup, TileLayer, Polyline } from \"react-leaflet\"\nimport { connect } from \"react-redux\"\nimport { setBackgroundLocation } from \"../reducers/backgroundMapReducer\"\nimport { setActiveTrail } from \"../reducers/trailReducer\"\nimport polyUtil from \"polyline-encoded\"\n\nconst BackgroundMap = ({\n  latlng,\n  setLatlng,\n  routes,\n  activeTrail,\n  mapClass\n}) => {\n  const [trails, setTrails] = useState([])\n  console.log(\"mapclass bgmapin alussa: \", mapClass)\n\n  useEffect(() => {\n    let alltrails = []\n    //tähän vielä joku filteröivä ehto, active trail rendataan nyt kahdesti\n    if (routes.length > 0) {\n      alltrails = routes.map(route =>\n        route.legs.map(leg => {\n          const decodedTrail = polyUtil.decode(leg.legGeometry.points)\n          return { color: \"gray\", decodedTrail }\n        })\n      )\n      console.log(\"activeTrail:\", activeTrail)\n      console.log(\"routes:\", routes)\n\n      const placeholder = routes[activeTrail].legs.map(leg => {\n        let color = \"red\"\n        if (leg.mode === \"WALK\") {\n          color = \"green\"\n        } else if (leg.mode === \"SUBWAY\") {\n          color = \"orange\"\n        } else if (leg.mode === \"BUS\") {\n          color = \"blue\"\n        }\n        const decodedTrail = polyUtil.decode(leg.legGeometry.points)\n        return { color, decodedTrail, active: true }\n      })\n      alltrails.push(placeholder)\n    }\n    console.log(\"alltrails:\", alltrails)\n    setTrails(alltrails)\n  }, [routes, activeTrail, mapClass])\n  return (\n    <>\n      {console.log(\"latlng juuri ennen mappia: \", latlng)}\n      {console.log(\"className ennen mappia: \", mapClass)}\n      <Map\n        className={mapClass}\n        center={latlng}\n        zoom={12}\n        maxZoom={19}\n        attributionControl={true}\n        zoomControl={true}\n        doubleClickZoom={true}\n        scrollWheelZoom={true}\n        dragging={true}\n        animate={true}\n        easeLinearity={0.35}\n        onclick={e => {\n          console.log(\"lat, lng\", [e.latlng.lat, e.latlng.lng])\n        }}\n      >\n        {console.log(\"routes bgmapissa: \", routes)}\n        {console.log(\"trails ennen rendausta: \", trails)}\n        {trails.map(trail =>\n          trail.map(leg => (\n            <Polyline color={leg.color} positions={leg.decodedTrail} />\n          ))\n        )}\n        {console.log(\"trails rendauksen jälkeen: \", trails)}\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        />\n      </Map>\n    </>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    latlng: state.backgroundMapReducer,\n    routes: state.routeReducer,\n    activeTrail: state.trailReducer,\n    mapClass: state.mapClassReducer\n  }\n}\n\nconst mapDispatchToProps = {\n  setLatlng: setBackgroundLocation\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BackgroundMap)\n","import React from \"react\"\nimport MainMenu from \"./components/MainMenu\"\nimport SearchForm from \"./components/SearchForm\"\nimport BackgroundMap from \"./components/BackgroundMap\"\nimport \"./styles.css\"\n\nconst App = () => {\n  return (\n    <>\n      <MainMenu />\n      <BackgroundMap />\n      <SearchForm />\n    </>\n  )\n}\n\nexport default App\n","import { createStore, combineReducers, applyMiddleware } from \"redux\"\nimport thunk from \"redux-thunk\"\nimport backgroundMapReducer from \"./reducers/backgroundMapReducer\"\nimport routeReducer from \"./reducers/routeReducer\"\nimport trailReducer from \"./reducers/trailReducer\"\nimport mapClassReducer from \"./reducers/mapClassReducer\"\nimport formClassReducer from \"./reducers/formClassReducer\"\nconst reducer = combineReducers({\n  backgroundMapReducer,\n  routeReducer,\n  trailReducer,\n  mapClassReducer,\n  formClassReducer\n})\n\nconst store = createStore(reducer, applyMiddleware(thunk))\n\nexport default store\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport { ApolloProvider } from \"react-apollo\"\nimport { ApolloProvider as ApolloHooksProvider } from \"react-apollo-hooks\"\nimport { Provider } from \"react-redux\"\nimport store from \"./store\"\n\nimport { ApolloClient } from \"apollo-boost\"\nimport { createHttpLink } from \"apollo-link-http\"\nimport { InMemoryCache } from \"apollo-cache-inmemory\"\nimport { setContext } from \"apollo-link-context\"\n\nimport { split } from \"apollo-link\"\nimport { WebSocketLink } from \"apollo-link-ws\"\nimport { getMainDefinition } from \"apollo-utilities\"\n\nimport config from \"./config\"\n// Create a WebSocket link:\nconst wsLink = new WebSocketLink({\n  uri: config.WSPORT,\n  options: {\n    reconnect: true\n  }\n})\n\nconst httpLink = createHttpLink({\n  uri: config.PORT\n})\n\nconst authLink = setContext((_, { headers }) => {\n  const token = localStorage.getItem(\"app-user-token\")\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `bearer ${token}` : null\n    }\n  }\n})\n\nconst link = split(\n  ({ query }) => {\n    const { kind, operation } = getMainDefinition(query)\n    return kind === \"OperationDefinition\" && operation === \"subscription\"\n  },\n  wsLink,\n  authLink.concat(httpLink)\n)\n\nconst client = new ApolloClient({\n  link,\n  cache: new InMemoryCache()\n})\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <ApolloHooksProvider client={client}>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </ApolloHooksProvider>\n  </ApolloProvider>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}